# GI/CAスコアリング定量化計画

## Context

現在のGI（G1-G6）スコアとCAスコアは定性的な主観判断で採点されている。
- G1-G6: 「1=低い、5=高い」の端点定義のみ。2/3/4の境界なし
- TOP1-2: 出典不明（AI推定か人間判断か記録なし）
- CA: TOP1-2 vs タイトルの主観照合

これを全て定量的に計測可能な基準に置き換える。

---

## 影響範囲

### youtube-analyze（分析側）
| ファイル | 変更種別 | 理由 |
|---|---|---|
| `data/human_scores.json` | **スキーマ拡張** | エビデンス（検索件数等）の記録フィールド追加 |
| `data/scoring_criteria.md` | **新規作成** | 定量スコアリング基準の定義文書 |
| `scripts/data_summarizer.py` | **更新** | エビデンス情報をdata_summaryに出力 |
| `agents/agent_c_meta_analysis.md` | **確認のみ** | GI×CAを使うが、スコアリング基準自体は参照しない |
| `agents/agent_e_verification.md` | **確認のみ** | 同上 |
| `agents/coordinator.md` | **軽微更新** | スコアリングプロセスの記述追加 |
| `scripts/step3_filters.py` | **変更なし** | 閾値16は計算結果を使うだけ。基準変更の影響なし |
| `scripts/step3_build_model.py` | **変更なし** | human_scores.jsonの既存フィールド(GI_v3, CA, GI_x_CA)を読むのみ |

### youtube-long（制作側）
| ファイル | 変更種別 | 理由 |
|---|---|---|
| `prompts/1. selection_report.md` | **主要更新** | Step 1-1のG1-G6定義を定量基準に置換、Step 1-2の好奇心マップ手順を詳細化、Step 1-3のCA判定基準を定量化 |
| `agents/utayomi-step1-selection.md` | **軽微更新** | 定量基準への参照を明記 |
| `prompts/system_prompt.md` | **変更なし** | CA制約ルール(CA-1,CA-2,CA-3)はCA値の「使い方」であり「採点方法」ではない。CA値が0-3である限り影響なし |
| `prompts/2. research2themes.md` | **変更なし** | selection_report.mdのCA値を参照するのみ |
| `prompts/4. character2hook.md` | **変更なし** | 同上 |
| `prompts/7a. event_placement.md` | **変更なし** | 同上 |
| `prompts/7b. ...three_act_structure.md` | **変更なし** | 同上 |

### 変更なしの根拠
- step2, step4, step7a, step7bは`selection_report.md`の**出力**（CA値、好奇心TOP1-2）を使う
- 出力フォーマット（CA=0-3、TOP1-2テキスト）は変更しない
- よって下流プロンプトへの影響なし
- `system_prompt.md`のCA制約(CA-1,CA-2,CA-3)は「CA=3の台本をどう書くか」のルールであり、「CA=3をどう採点するか」ではない

---

## 実装ステップ

### Step 1: 定量スコアリング基準の定義

**ファイル**: `youtube-analyze/data/scoring_criteria.md`（新規作成）

#### G1: ゴシップ露出度（Web検索カウント）
```
検索クエリ: "{アーティスト名}" ワイドショー OR 特集 OR スキャンダル
対象期間: 直近2年
計測値: 独立記事数（同一ニュースの転載は1件としてカウント）

| スコア | 記事数 |
|--------|--------|
| 5      | 10件以上 |
| 4      | 5-9件 |
| 3      | 3-4件 |
| 2      | 1-2件 |
| 1      | 0件 |

故人の場合: 死去年を含む3年間 + 直近2年 の合計で判定
```

#### G2: 好奇心の総量（Googleサジェスト数）
```
検索クエリ: "{アーティスト名}"を入力した際のGoogleサジェスト補完
計測値: サジェスト数 + 「なぜ」「現在」「死因」等の好奇心系ワードの出現数

| スコア | サジェスト中の好奇心系ワード数 |
|--------|-------------------------------|
| 5      | 5個以上 |
| 4      | 3-4個 |
| 3      | 2個 |
| 2      | 1個 |
| 1      | 0個 |

好奇心系ワード: なぜ, 理由, 死因, 現在, 真実, 真相, 秘密, 衝撃, 闇
```

#### G3: 感情的フックの強さ（イベントカウント）
```
計測値: research.md/data_summary.mdから以下のカテゴリ該当数をカウント

カテゴリ一覧:
A. 若年死亡（50歳未満で死去）
B. 重病/障害（不治の病、身体障害、精神疾患）
C. 虐待/暴力被害（DV、性暴行、いじめ）
D. 依存症（薬物、アルコール、ギャンブル）
E. 貧困/ホームレス経験
F. 家族崩壊（親の虐待、毒親、離婚による苦難）
G. 自殺未遂/自殺
H. 権力者による搾取（マネージャー、レーベル等）
I. 事件/テロ/暗殺の被害者
J. 復活/逆転（底からの這い上がり）

| スコア | 該当カテゴリ数 |
|--------|---------------|
| 5      | 6個以上 |
| 4      | 4-5個 |
| 3      | 3個 |
| 2      | 2個 |
| 1      | 0-1個 |
```

#### G4: 映画/ドキュメンタリー認知（日本公開実績）
```
検索クエリ: "{アーティスト名}" 映画 日本 興行収入
計測値: 日本で最もヒットした伝記映画/ドキュメンタリーの興行収入

| スコア | 基準 |
|--------|------|
| 5      | 日本興行収入10億円以上 |
| 4      | 日本興行収入1-9億円 |
| 3      | 日本で劇場公開あり（興行1億未満） |
| 2      | 配信のみ（Netflix/Disney+等）で日本語対応 |
| 1      | 日本未公開、または伝記作品なし |

注意: フィクション映画（アリー/スター誕生等）は対象外。伝記映画・ドキュメンタリーのみ
```

#### G6: 国民的楽曲知名度（CM/カラオケ/TV実績カウント）
```
検索クエリ: "{アーティスト名}" CM OR カラオケ OR 紅白 OR ドラマ主題歌
計測値: 日本のCM/TV/カラオケで使用実績が確認できる楽曲数

| スコア | 実績確認楽曲数 |
|--------|---------------|
| 5      | 3曲以上 |
| 4      | 2曲 |
| 3      | 1曲 |
| 2      | CM/TV使用なし。カラオケランキング上位のみ |
| 1      | 上記いずれの実績も確認できない |
```

#### TOP1-2: 好奇心マップ（Web検索ベース）
```
step1-selectionから移植。以下の5検索を必須実行:

1. {アーティスト名} なぜ
2. {アーティスト名} 死因 or 現在
3. {アーティスト名} 日本
4. {アーティスト名} 衝撃 or 真実
5. {アーティスト名}（Googleサジェスト/関連検索）

各検索結果からトピックを抽出し、出現回数でTOP5をランキング。
出現クエリ数を★で記録（5クエリ中何本に出現したか）。
```

#### CA: 好奇心アライメント（キーワード照合）
```
計測方法:
1. TOP1-2から核心キーワードを抽出（例: TOP1「借金の真相」→「借金」「ギャンブル」）
2. 動画タイトルに核心キーワードが含まれるか照合

| CA値 | 基準 |
|------|------|
| 3    | タイトルにTOP1の核心キーワードが直接含まれる |
| 2.5  | タイトルにTOP2の核心キーワードが直接含まれる（TOP1は台本内） |
| 2    | タイトルにTOP1-2の関連語（上位語/類義語）が含まれる |
| 1    | タイトルにTOP1-2関連のキーワードなし。TOP3以下のみ |
| 0    | タイトルのテーマが好奇心マップに存在しない |

核心キーワード: TOP1-2の文から名詞・動詞を抽出した2-3語
関連語: 核心キーワードの上位概念（例: 「借金」の関連語→「悲劇」「問題」）
```

### Step 2: human_scores.jsonスキーマ拡張

現在のフィールドに加え、エビデンスフィールドを追加:

```json
{
  "video_id": {
    "artist": "string",
    "source": "quantitative",
    "G1": 1-5,
    "G1_evidence": "検索クエリ: '...' → 記事数: N件",
    "G2": 1-5,
    "G2_evidence": "サジェスト好奇心系ワード: [なぜ, 現在, ...]",
    "G3": 1-5,
    "G3_evidence": "該当カテゴリ: [A,C,D,F,G]",
    "G4": 1-5,
    "G4_evidence": "映画名: XX, 日本興行: Y億円",
    "G6": 1-5,
    "G6_evidence": "CM使用曲: [曲1, 曲2], カラオケ: [曲3]",
    "GI_v3": "sum",
    "CA": 0-3,
    "CA_evidence": "TOP1キーワード: [借金,ギャンブル] → タイトル照合: 不一致 → CA=2",
    "curiosity_top1": "TOP1テキスト（Web検索由来）",
    "curiosity_top2": "TOP2テキスト（Web検索由来）",
    "curiosity_search_date": "2026-02-16",
    "GI_x_CA": "product"
  }
}
```

### Step 3: youtube-long/prompts/1. selection_report.md 更新

Step 1-1のGIスコア部分を、scoring_criteria.mdの定量基準に置換。

**変更箇所** (lines 42-64):
- 現在の定性テーブル → 定量テーブル（閾値付き）に置換
- 「各指標にスコアの根拠を1-2文で必ず記述すること」→「各指標に検索クエリと計測結果を記録すること」
- G3のイベントカウント方式を明記

**変更箇所** (lines 68-96): Step 1-2 好奇心マップ
- 既に5検索クエリが定義されている（変更不要）
- 追加: 「各TOPの核心キーワードを2-3語で抽出し記録すること」

**変更箇所** (lines 100-108): Step 1-3 CA判定
- 現在の定性定義 → キーワード照合ベースの定量基準に置換

### Step 4: エージェントファイル更新

**`youtube-analyze/agents/coordinator.md`**:
- データ分類テーブルに「scoring_criteria.md参照」を追記
- スコアリングプロセスの記述追加（Web検索→定量採点→エビデンス記録）

**`youtube-long/agents/utayomi-step1-selection.md`**:
- 「GIスコアの根拠は客観的事実に基づくこと」→「scoring_criteria.mdの定量基準に従い、検索結果の件数・キーワードを記録すること」

### Step 5: data_summarizer.py更新

Section 6aの人間評価テーブルに、エビデンスサマリ列を追加:
- 現在: `| Artist | G1 | G2 | G3 | G4 | G6 | GI_v3 | CA | GI×CA | HIT |`
- 追加: `| ... | source | curiosity_top1 | curiosity_top2 |`

### Step 6: 24本全動画の定量スコアリング実行

1. 各アーティストについてWeb検索5本を実行（TOP1-2取得）
2. G1/G2/G6用の追加検索を実行
3. G3はresearch情報からイベントカウント
4. G4はWeb検索で興行収入確認
5. CAはTOP1キーワード vs タイトル照合
6. 全結果をhuman_scores.jsonに記録（source: "quantitative"）

---

## 実行順序

1. `scoring_criteria.md` 作成（定義確定）
2. `prompts/1. selection_report.md` 更新（制作側の基準統一）
3. `agents/utayomi-step1-selection.md` 更新
4. `human_scores.json` スキーマ拡張
5. `data_summarizer.py` 更新
6. `coordinator.md` 更新
7. 24本の定量スコアリング実行（Web検索 + 記録）
8. `step2_analyze.py` 実行 → `step3_build_model.py` → モデル再構築

---

## 検証方法

1. `scoring_criteria.md`の閾値が既存の人間評価14本と大きく乖離しないか確認
   - 既存human評価のG1-G6を定量基準で再採点し、差異を比較
2. 定量スコアリング後に`python scripts/step2_analyze.py`が正常動作するか確認
3. 新スコアでのGI×CA相関(R²)と閾値精度を旧スコアと比較
4. Agent C/Eサイクルを1回実行し、定量スコアで仮説が生成・検証できるか確認
